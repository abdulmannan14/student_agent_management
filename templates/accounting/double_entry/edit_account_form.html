<div class="card bg-none card-box">
    <form method="POST" action="{% url "edit-chart-of-account" account.id %}" accept-charset="UTF-8">
        {% csrf_token %}
        <div class="row">
            <div class="form-group col-md-6">
                <label for="name" class="form-control-label">Name</label>
                <input class="form-control" required="required" name="name" type="text" value="{{ account.name }}"
                       id="name">
            </div>
            <div class="form-group col-md-6">
                <label for="code" class="form-control-label">Code</label>
                <input class="form-control" required="required" name="code" type="text" value="{{ account.code }}"
                       id="code">
            </div>
            <div class="form-group col-md-6">
                <label for="type" class="form-control-label">Account Type</label>
                <select data-url="{% url 'chart-of-accounts-categories' %}"
                        class="form-control select2 select2-hidden-accessible " required="required"
                        onchange="populate_select(this,'sub_type')"
                        id="type" name="account_type">
                    <option value="0">--</option>
                    <option value="Asset" {% if account.account_type == "Asset" %}selected{% endif %}
                    >Assets
                    </option>
                    <option value="Expense" {% if account.account_type == "Expense" %}selected{% endif %}>Expenses
                    </option>
                    <option value="Income" {% if account.account_type == "Income" %}selected{% endif %}>Income</option>
                    <option value="liability" {% if account.account_type == "liability" %}selected{% endif %}>liability
                    </option>
                    <option value="Equity" {% if account.account_type == "Equity" %}selected{% endif %}>Equity</option>

                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="sub_type" class="form-control-label">Category</label>
                <select class="form-control select2 select2-hidden-accessible sub_type"
                        name="category"
                        id="sub_type" required="" data-select2-id="sub_type" tabindex="-1"
                        aria-hidden="true">
                    {% for cat in account_categories %}
                        <option value="{{ cat }}">{{ cat }}</option>
                    {% endfor %}


                </select>
            </div>

            <div class="form-group col-md-6">

                <label for="is_enabled" class="form-control-label">Is Enabled</label>
                <div class="custom-control custom-switch">

                    <input type="checkbox" class="email-template-checkbox custom-control-input"
                           name="is_enabled" id="is_enabled" checked="">
                    <label class="custom-control-label form-control-label" for="is_enabled"></label>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="description" class="form-control-label">Description</label>
                <textarea class="form-control" rows="2" name="description" cols="50"
                          id="description">{{ account.description }}</textarea>
            </div>
            <div class="col-md-12">
                <input type="submit" value="Create" class="btn-create badge-blue">
                <input type="button" value="Cancel" class="btn-create bg-gray" data-dismiss="modal">
            </div>
        </div>
    </form>
</div>

    <script>
        function populate_select(source,target_id) {
            source=$(source)
            let target=$(`#${target_id}`)
            target.empty()
            target.append(`<option value="">Loading...</option>`);
            $.ajax({
                url: source.data("url"),
                type: 'GET',
                data: {
                    "account_type": source.val(),
                },
                success: function (data) {
                    {#console.log(data)#}
                    target.empty()
                    $.each(data, function (index, value) {
                        target.append(`<option value="${value}">${value}</option>`);
                    });

                },error:function (error){
                                target.empty()
                                $(".select2-selection").css("border","1px solid red")

 target.append(`<option value="">Something went wrong</option>`);
                }
            });


            console.log("type change test")

        };

    </script>